# ================================================
# NY Opening Range Breakout (ORB) Strategy Config
# For separate Binance account
# ================================================

# Exchange keys (REPLACE WITH WIFE'S ACCOUNT KEYS)
BINANCE_API_KEY = "dtRKQOSV9qApk3eGxXBX8r236PN5k4Sl5Bi6B6nB9kzbI75OxeGcC159tjxREttn"
BINANCE_API_SECRET = "595U1Hk974dROAzkYVolLJcIf00D5URnVMlQst1yJhPrK5pE2J3KimpVzwLqT5Wc"

# Telegram (can use same bot or different)
TELEGRAM_BOT_TOKEN=8151392465:AAHKPRjxOBvMy-CxcqM6FJ743rnXZSz4qoM
TELEGRAM_CHAT_ID=377998110

# ORB Strategy Symbols (comma-separated) — USDT-M perps
ORB_SYMBOLS=BTC/USDT

# ORB Opening Range Settings
# ORB_START_UTC: NY market open time (14:30 UTC = 9:30 AM EST)
ORB_START_UTC=14:30
# ORB_MINUTES: Opening range duration in minutes
ORB_MINUTES=15
# ORB_TIMEFRAME: Timeframe for OR calculation (should match duration)
ORB_TIMEFRAME=15m
# ORB_SIGNAL_TIMEFRAME: Timeframe for breakout detection
ORB_SIGNAL_TIMEFRAME=1m
# ORB_CHECK_INTERVAL: How often to check for trades in seconds
ORB_CHECK_INTERVAL=60

# ORB Strategy Parameters
# ORB_RR: Risk-reward ratio (SL at OR midpoint, TP = entry + RR*risk)
ORB_RR=2.1
# ORB_EMA_PERIOD: EMA period for slope confirmation
ORB_EMA_PERIOD=9
# ORB_EMA_SLOPE_BARS: Number of bars to check for EMA slope direction
ORB_EMA_SLOPE_BARS=3
# ORB_ORDER_BUFFER_PCT: Price buffer above/below breakout candle for pending order trigger (0.0005 = 0.05%)
ORB_ORDER_BUFFER_PCT=0.0005

# ORB Breakout Quality Filters (reduce false breakouts)
# ORB_VOL_MULT: Volume expansion multiplier - breakout candle volume must be X times the recent average (1.2 = 20% higher)
ORB_VOL_MULT=1.2
# ORB_MIN_BODY_RATIO: Minimum body-to-candle ratio - ensures strong decisive candles (0.5 = body is 50% of total range)
ORB_MIN_BODY_RATIO=0.5

# ORB Ladder Settings (3-TP system with progressive SL)
# ORB_TP_SPLITS: Distance multipliers for TP1, TP2, TP3 (0.33 = 33% of distance from entry to final TP)
ORB_TP_SPLITS=0.33,0.66,1.0
# ORB_TP_QTY_PCT: Cumulative % of position to close at each TP (33,33,100 = close 33% at TP1, another 33% at TP2, remaining 34% at TP3)
# Note: Last value should be 100 to close all remaining position
ORB_TP_QTY_PCT=33,33,100
# Progressive SL behavior:
#   - Initial: SL at OR midpoint
#   - After TP1 hit (33%) → SL moves to BREAKEVEN (entry price)
#   - After TP2 hit (33%) → SL moves to TP1 price (locks in TP1 profit)
#   - After TP3 hit (34%) → Position fully closed

# Trading Controls
# ORB_TRADE: Set to 'false' to only log signals without executing trades
ORB_TRADE=true
# ORB_MAX_TRADES: Maximum number of trades per symbol per day (UTC reset)
ORB_MAX_TRADES=1
# ORB_DEBUG: When 'true', send detailed logs. When 'false', show only essentials
ORB_DEBUG=true
# ORB_LOG_KEEPALIVE_SEC: Heartbeat log interval when no signals
ORB_LOG_KEEPALIVE_SEC=300

# ============== TRADE EXECUTION PARAMETERS ==============
# RISK_NOTIONAL_USDT: Position size in USDT per trade (default for all symbols)
RISK_NOTIONAL_USDT=650
# RISK_NOTIONAL_MAP: Override position size per symbol
# Format: SYMBOL:USDT_AMOUNT,SYMBOL:USDT_AMOUNT
RISK_NOTIONAL_MAP=BTC/USDT:650

# Dynamic ladder (optional - can be enabled for progressive TP/SL management)
# Leave empty to disable or configure like main .env
DYN_ROI_STAGES=
DYN_SL_AT_STAGE=
DYN_TP_AT_STAGE=
DYN_MIN_REARM_SECONDS=10
DYN_METRIC=ROE
DYN_USE_MARK=true

# Tick-safe stop placement
STOP_TICKS_AWAY=2
STOP_BUFFER_PCT_MIN=0.0003

# BRACKET_MODE: How SL/TP are calculated
#   - 'ATR': Uses strategy-provided SL/TP (single TP/SL)
#   - 'ROE': Based on Return on Equity %
#   - 'FIXED_PCT': Fixed price percentage
#   - 'LADDER': Multiple TP levels with partial closes (recommended for ORB)
BRACKET_MODE=LADDER

# ROE mode settings (if BRACKET_MODE=ROE)
ROE_SL=-5
ROE_TP=13

# LADDER mode settings (if BRACKET_MODE=LADDER)
# LADDER_TP_PCT: ROE % targets for take profit levels
# Single TP: 21 = TP at 21% ROE
# With 20x leverage: 21% ROE = 1.05% price move
LADDER_TP_PCT=21
# LADDER_TP_QTY_PCT: % of position to close at each TP (MUST sum to 100)
# Single TP: 100 = close 100% at TP
LADDER_TP_QTY_PCT=100
# LADDER_SL_PCT: Initial stop-loss as ROE %
# -9 = -9% ROE with 20x leverage = -0.45% price move
LADDER_SL_PCT=-9

# Leverage & Margin
LEVERAGE=20
MARGIN_MODE=isolated

# Risk Management
LOG_SIGNALS_ONLY=false
DAILY_LOSS_CAP_USDT=100
COOLDOWN_SECONDS=300
DEBUG_DECISIONS=false

# ATR Settings (used if BRACKET_MODE requires ATR calculation)
ATR_SOURCE=ITF
ATR_PERIOD=14
ATR_SL_MULT=1.25
ATR_TP_MULT=2.5
