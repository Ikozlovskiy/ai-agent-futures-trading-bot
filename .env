 Exchange keys
BINANCE_API_KEY = "MbHuigPGXZXA7HkW0uywfBjl9OrFqHDDyEMVKtZ3rKiptrmZRhCZZA31Pavh0OOE"
BINANCE_API_SECRET = "s4iBFHwMpqleOQkWYm1QvCiMXuTKV7TPkqzeXZRn3CGcgjG75rbNrBH5O2s3tYtU"
# Telegram
TELEGRAM_BOT_TOKEN=8151392465:AAHKPRjxOBvMy-CxcqM6FJ743rnXZSz4qoM
TELEGRAM_CHAT_ID=377998110

# Symbols (comma-separated) â€” USDT-M perps
SYMBOLS=ETH/USDT,SOL/USDT,DOGE/USDT,BTC/USDT,XRP/USDT
# For NY-Open FVG runner only (overrides SYMBOLS if present)
NY_OPEN_SYMBOLS=ETH/USDT
OR_START_UTC=14:30
OR_MINUTES=15
# OR_TIMEFRAME: Timeframe for opening range candle (e.g., 15m)
OR_TIMEFRAME=15m
# FVG_TIMEFRAME: Timeframe for FVG detection (e.g., 5m)
FVG_TIMEFRAME=5m
# FVG_CHECK_INTERVAL: How often to check for trades in seconds (e.g., 300 = 5 minutes)
FVG_CHECK_INTERVAL=60
# FVG_ALLOW_OUTSIDE: Allow FVGs outside the OR range
FVG_ALLOW_OUTSIDE=true
# FVG_RR: Risk-reward ratio for FVG trades (SL at FVG boundary, TP = entry + RR*risk)
FVG_RR=2.1
# REQUIRE_BREAK_WITHIN: Disabled for simplified touch-based entry (set to empty or remove)
REQUIRE_BREAK_WITHIN=
# --- Trading controls for the NY-Open runner ---
# NY_OPEN_TRADE: Set to 'false' to only log signals without executing trades
# When 'true', trades execute automatically when FVG signals are confirmed
NY_OPEN_TRADE=true
# NY_OPEN_MAX_TRADES: Maximum number of trades per symbol per day (UTC reset)
NY_OPEN_MAX_TRADES=1
# NY_OPEN_DEBUG: When 'true', send detailed FVG signal logs and error messages.
# When 'false' (production), show: trade entry/exit, OR updates, heartbeats, countdowns, daily resets
# but hide: FVG signal detection details and error messages
NY_OPEN_DEBUG=false

# Timeframes
HTF=1h
ITF=15m
LTF=1m

# Strategy selection:
# Map per symbol:
# A   = Combo A
# C1  = Trendline Break + EMA Pullback
# C2  = Consolidation Breakout + ATR Expansion
# BR  = Standalone Break & Retest (15m)
# EMA9= Standalone Pullback to 9 EMA (15m)
STRATEGY_MAP=ETH/USDT:A,SOL/USDT:C2,DOGE/USDT:C1,BTC/USDT:BR,XRP/USDT:EMA9


# Risk (ATR model)
# ============== TRADE EXECUTION PARAMETERS ==============
# RISK_NOTIONAL_USDT: Position size in USDT per trade (default for all symbols)
RISK_NOTIONAL_USDT=650
# RISK_NOTIONAL_MAP: Override position size per symbol
# Format: SYMBOL:USDT_AMOUNT,SYMBOL:USDT_AMOUNT
RISK_NOTIONAL_MAP=ETH/USDT:650
# Enable dynamic TP/SL by ROI stages (leave empty to disable)

# --- Dynamic ladder uses ROE for stage triggers (what the heartbeat shows) ---
# Stages trigger when ROE crosses these %
# DISABLED: Using LADDER mode's built-in TP-triggered SL progression instead
DYN_ROI_STAGES=

# At each stage, move SL/TP to these *price% vs entry* levels (code interprets as price%):
# (20x leverage mapping: ROE% / 20 = price%)
#  10% ROE -> 0.50% price
#  15% ROE -> 0.75% price
#  20% ROE -> 1.00% price
#  25% ROE -> 1.25% price
#  30% ROE -> 1.50% price
#  35% ROE -> 1.75% price
#
# SL logic (conservative; price% vs entry - always favorable direction):
#  - after 10% ROE: SL -> 0.00% price (BREAKEVEN - entry price, 0% ROI)
#  - after 15% ROE: SL -> 0.25% price (~5% ROE with 20x leverage)
#  - after 20% ROE: SL -> 0.50% price (~10% ROE with 20x leverage)
#  - after 25% ROE: SL -> 0.75% price (~15% ROE with 20x leverage)
#  - after 30% ROE: SL -> 1.00% price (~20% ROE with 20x leverage)
#  - after 35% ROE: SL -> 1.25% price (~25% ROE with 20x leverage)
DYN_SL_AT_STAGE=0.00,0.25,0.50,0.75,1.00,1.25

# TP logic (conservative; keep TP well above SL so position has room to profit):
#  - after 10% ROE: TP -> 0.60% price (~12% ROE with 20x leverage)
#  - after 15% ROE: TP -> 0.85% price (~17% ROE with 20x leverage)
#  - after 20% ROE: TP -> 1.10% price (~22% ROE with 20x leverage)
#  - after 25% ROE: TP -> 1.35% price (~27% ROE with 20x leverage)
#  - after 30% ROE: TP -> 1.60% price (~32% ROE with 20x leverage)
#  - after 35% ROE: TP -> 1.85% price (~37% ROE with 20x leverage)
DYN_TP_AT_STAGE=0.60,0.85,1.10,1.35,1.60,1.85
DYN_MIN_REARM_SECONDS=10        # Cooldown between re-arms per symbol

# Tick-safe stop placement (symbol-aware)
STOP_TICKS_AWAY=2           # keep at least 2 ticks beyond current mark
STOP_BUFFER_PCT_MIN=0.0003  # extra 0.03% guard

# ATR source & brackets (kept same; dynamic ladder will adjust after entry)
ATR_SOURCE=HYBRID
ATR_PERIOD=14
ATR_SL_MULT=1.25
ATR_TP_MULT=2.5
HYBRID_SL_FLOOR_ITF_ATR_MULT=0.6
HYBRID_WICK_BUFFER_PCT=0.0007
HYBRID_TP_ITF_ATR_MULT=1.0

# BRACKET_MODE: How SL/TP are calculated
#   - 'ROE': Based on Return on Equity % (ROE_SL and ROE_TP below)
#   - 'ATR': Uses strategy-provided SL/TP (for FVG: uses FVG_RR)
#   - 'FIXED_PCT': Fixed price percentage (FIXED_SL_PCT and FIXED_TP_PCT)
#   - 'LADDER': Multiple TP levels with partial closes (LADDER_TP_PCT, LADDER_TP_QTY_PCT, LADDER_SL_PCT)
#   - 'LADDER': Multiple TP levels with partial closes (LADDER_TP_PCT, LADDER_TP_QTY_PCT, LADDER_SL_PCT)
# For NY-Open FVG: Set to 'ATR' to use FVG_RR-based brackets
BRACKET_MODE=LADDER
# ROE_SL: Stop-loss as ROE % (negative = loss; e.g., -5 = -5% ROE)
# With 20x leverage: -5% ROE = -0.25% price move
ROE_SL=-5
# ROE_TP: Take-profit as ROE % (positive = profit; e.g., 13 = +13% ROE)
# With 20x leverage: +13% ROE = +0.65% price move
ROE_TP=13
# --- LADDER mode: 3TP system with progressive SL management ---
# LADDER_TP_PCT: Comma-separated ROE % targets for take profit levels
# Single TP: 21 = TP at 21% ROE
# With 20x leverage: 21% ROE = 1.05% price move
LADDER_TP_PCT=21
# LADDER_TP_QTY_PCT: Comma-separated % of position to close at each TP (MUST sum to 100)
# Single TP: 100 = close 100% at TP
LADDER_TP_QTY_PCT=100
# LADDER_SL_PCT: Initial stop-loss as ROE % (negative = loss; e.g., -9 = -9% ROE)
# With 20x leverage: -9% ROE = -0.45% price move
LADDER_SL_PCT=-9
# optional: ROE metric heartbeat & re-arm metric
DYN_METRIC=ROE
DYN_USE_MARK=true
# Leverage & mode
# LEVERAGE: Leverage multiplier (e.g., 20 = 20x leverage)
LEVERAGE=20
# MARGIN_MODE: 'isolated' or 'cross' margin
MARGIN_MODE=isolated

# Behavior
LOG_SIGNALS_ONLY=false
DAILY_LOSS_CAP_USDT=150
COOLDOWN_SECONDS=300
DEBUG_DECISIONS=true


########### Combo A (HTF S/D + BOS/CHOCH -> ITF B&R -> LTF trigger)
A_SD_TOUCH_TOL=0.65
A_BOS_MIN_ATR=0.3
A_RETEST_TOL=0.8
A_LTF_BODY_MIN=0.22
A_LTF_SWIPE_WICK=0.15

########### C1 (Trendline Break + EMA Pullback)
C1_MIN_SWINGS=2
C1_BREAK_BUF_ATR=0.20
A_RETEST_TOL=0.8
A_LTF_BODY_MIN=0.22
A_LTF_SWIPE_WICK=0.15

########### C2 (Consolidation Breakout + ATR Expansion)
C2_BOX_BARS=20
C2_BOX_ATR_MAX=1.25
C2_BREAK_BUF_ATR=0.20
C2_EXP_TR_MULT=0.85
C2_VOL_MULT=0.90
C2_RETEST_TOL=0.80

# Standalone BR
BR_BREAK_BUFFER=0.0012    # medium-tight: 0.12%
BR_RETEST_TOL=0.0025      # medium-tight: 0.25%
BR_RETEST_BARS=4        # keep
BR_MIN_BODY_RATIO=0.58    # slightly easier than 0.60 to allow clean but not extreme bars
BR_VOL_MULT=1.12          # medium-tight volume filter

# Standalone EMA9
EMA9_PROX_TOL=0.0075      # looser proximity to EMA9
EMA9_MIN_BODY_RATIO=0.35  # more permissive body
EMA9_TR_MULT=0.85         # looser TR requirement
EMA9_VOL_MULT=0.90        # looser volume filter

########### Global regime (applies across combos)
REGIME_EMA_FAST=50
REGIME_EMA_SLOW=200
REGIME_ATR_MULT=0.60
   # optional; empty to disable

# Funding filter (disabled)
FUNDING_ABS_CAP=0